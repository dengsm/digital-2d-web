<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover"
        />
        <title>龙马科技-鸿源技术学校AI助手</title>
        <link rel="stylesheet" href="/motion.css" />
        <link rel="stylesheet" href="/frame.css" />
        <link rel="stylesheet" href="/main.css" />
    </head>
    <body>
        <div class="container">
            <div class="teacher-panel">
                <!-- 专业推荐 -->
                <div class="feature-intro">
                    <div class="intro-icon">🧑‍🏫</div>
                    <div class="intro-text">
                        您好！我是您的智能咨询助手，可提供：<br />
                        • 💬
                        <strong>在线咨询</strong>
                        ：可在底部聊天框咨询专业信息和学校情况<br />
                        • 🎯
                        <strong>专业智能推荐</strong>：
                        点击下方👇🏻按钮开始答题，获取个性化推荐<br />
                    </div>

                    <!-- 浮动按钮区域 -->
                    <div class="floating-buttons">
                        <button
                            id="toggleBtn"
                            class="floating-btn interactive-btn"
                            onclick="handleToggleClick()"
                        >
                            <span class="btn-text">开始专业推荐</span>
                            <span class="click-hint">👆</span>
                        </button>
                    </div>
                </div>

                <!-- 多元智能评测 -->
                <div class="user-info-placeholder">
                    <div class="feature-intro">
                        <div class="intro-icon">🧠</div>
                        <div class="intro-text">
                            多元智能测评功能：<br />
                            • 🔍
                            <strong>性格特点测评</strong>
                            ：多元智能测评是测评您的性格特点，单选题，共126道<br />
                            • 📊
                            <strong>智能分析</strong>
                            ：点击下方👇🏻按钮开始测评，获取个性化分析结果<br />
                        </div>

                        <!-- 浮动按钮区域 -->
                        <div class="floating-buttons">
                            <button
                                id="psychologyBtn"
                                class="floating-btn interactive-btn"
                                onclick="handlePsychologyBtnClick()"
                            >
                                <span class="btn-text">多元智能测评</span>
                                <span class="click-hint">👆</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 明学 明事 明德 明志 艺术字 -->
                <div class="mingxue-art">
                    <span class="mingxue-char">明学</span>
                    <span class="mingxue-char">明事</span>
                    <span class="mingxue-char">明德</span>
                    <span class="mingxue-char">明志</span>
                </div>

                <!-- 小图片 -->
                <div class="info-pic">
                    <img src="pic/1.png" alt="图片1" class="info-image" />
                    <img src="pic/2.png" alt="图片2" class="info-image" />
                </div>
            </div>

            <div class="chat-panel">
                <!-- Header -->
                <div class="chat-header">
                    <img
                        src="pic/school_name.png"
                        alt="鸿源技术学校AI助手"
                        style="
                            max-width: 100%;
                            height: 78px;
                            display: block;
                            margin: 0 auto;
                            object-fit: contain;
                        "
                    />
                </div>

                <div class="chat-messages" id="chatMessages">
                    <div class="message assistant">
                        <div class="message-bubble">
                            🎓 欢迎使用鸿源技术学校智能推荐系统！<br /><br />
                            🎯 <strong>产品介绍：</strong><br />
                            •
                            专业智能推荐：通过答题分析，为职业学生推荐最适合的专业方向<br />
                            • 智能咨询对话：可咨询专业信息、学校情况等问题<br />
                            • 语音交互体验：右侧数字人支持语音对话交流<br /><br />
                            📝 <strong>使用说明：</strong><br />
                            1️⃣
                            点击左侧“开始专业推荐”按钮，填写个人信息后开始答题<br />
                            2️⃣ 答题完成后，系统将生成个性化的专业推荐报告<br />
                            3️⃣ 也可直接在下方输入框发送消息，进行自由咨询<br /><br />
                            现在就开始体验吧！🚀
                        </div>
                    </div>
                </div>

                <div class="loading" id="loading">
                    <span class="loading-dots">处理中...</span>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-title">
                        <span class="progress-icon">🔄</span>
                        <span id="progressTitle">正在分析您的回答...</span>
                    </div>
                    <div class="progress-stages">
                        <span class="progress-stage" id="stage1">接收答案</span>
                        <span class="progress-stage" id="stage2">分析处理</span>
                        <span class="progress-stage" id="stage3">生成结果</span>
                        <span class="progress-stage" id="stage4">完成</span>
                    </div>
                    <div class="progress-bar-container">
                        <div
                            class="progress-bar"
                            id="progressBar"
                            style="width: 0%"
                        ></div>
                    </div>
                    <div class="progress-text" id="progressText">0%</div>
                </div>

                <div class="chat-input-container">
                    <input
                        type="text"
                        class="chat-input"
                        id="chatInput"
                        placeholder="请输入您的问题或想法..."
                    />
                    <button class="send-button" id="sendButton">发送</button>
                </div>
            </div>

            <div class="right-panel">
                <div class="iframe-container">
                    <!-- 可拖动的浮窗嵌入完整网页 -->
                    <div id="draggable-window" class="draggable-window">
                        <div class="window-header" id="window-header">
                            <div class="window-controls">
                                <button class="minimize-btn" id="minimizeBtn">
                                    −
                                </button>
                            </div>
                        </div>
                        <div class="window-content">
                            <iframe
                                src="/sentio"
                                id="main-iframe"
                                style="
                                    width: 100%;
                                    height: 100%;
                                    border-radius: 0px;
                                "
                                allow="microphone; camera; clipboard-read; clipboard-write"
                                sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-downloads allow-presentation"
                            >
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 用户信息弹出框 - 放在body根级别以实现整个网页居中 -->
        <div
            id="userInfoModal"
            class="modal"
            tabindex="-1"
            role="dialog"
            aria-modal="true"
            aria-labelledby="modalTitle"
            aria-describedby="modalDescription"
        >
            <div class="modal-content">
                <div class="modal-header">
                    <h4>请填写以下信息以获得更精准的智能分析：</h4>
                    <span class="close" onclick="closeUserInfoModal()"
                        >&times;</span
                    >
                </div>
                <div class="modal-body">
                    <div class="input-group" style="position: relative">
                        <label for="userName" class="input-label">姓名：</label>
                        <input
                            type="text"
                            class="info-input"
                            id="userName"
                            placeholder="请输入您的姓名"
                            autocomplete="off"
                            name="userName"
                        />
                        <div class="error-message" id="nameError"></div>
                    </div>

                    <div class="input-group" style="position: relative">
                        <label for="userPhone" class="input-label"
                            >手机号：</label
                        >
                        <input
                            type="text"
                            class="info-input"
                            id="userPhone"
                            placeholder="请输入您的手机号（11位）"
                            autocomplete="off"
                            name="userPhone"
                            inputmode="numeric"
                            pattern="[0-9]*"
                        />
                        <div class="error-message" id="phoneError"></div>
                    </div>

                    <div class="input-group" style="position: relative">
                        <label for="userIdCard" class="input-label"
                            >身份证号：</label
                        >
                        <input
                            type="text"
                            class="info-input"
                            id="userIdCard"
                            placeholder="请输入您的身份证号（15或18位）"
                            autocomplete="off"
                            name="userIdCard"
                        />
                        <div class="error-message" id="idCardError"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button
                        class="modal-btn cancel-btn"
                        onclick="closeUserInfoModal()"
                    >
                        我不填了
                    </button>
                    <button
                        class="modal-btn continue-btn"
                        onclick="handleContinueClick()"
                    >
                        开始测评
                    </button>
                </div>
            </div>
        </div>

        <!-- 父页面截图处理器 - 移动到页面末尾避免干扰 -->
        <script src="/screenshot.js"></script>

        <script src="/draggableWindow.js"></script>

        <script src="/main.js"></script>
    </body>
</html>
